
USER TABLE
************

CREATE TABLE `USER` (
  `USER_ID` varchar(50) NOT NULL DEFAULT 'AUTO_INCREMENT',
  `EMAIL_ID` varchar(255) NOT NULL,
  `STATUS_TYPE_ID` int(11) NOT NULL,
  `FIRST_NAME` varchar(255) NOT NULL,
  `LAST_NAME` varchar(255) NOT NULL,
  `PHONE_NUMBER` varchar(255) NOT NULL,
  `CREATED_TIMESTAMP` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `UPDATED_TIMESTAMP` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`USER_ID`),
  UNIQUE KEY `USER_NAME` (`EMAIL_ID`),
  KEY `FK_USER_STATUS_TYPE` (`STATUS_TYPE_ID`),
  CONSTRAINT `FK_USER_STATUS_TYPE` FOREIGN KEY (`STATUS_TYPE_ID`) REFERENCES `STATUS_TYPE` (`STATUS_TYPE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


ALERT TABLE
************

CREATE TABLE `ALERT` (
  `ALERT_TRANSACTION_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `SUBSCRIPTION_ID` bigint(20) NOT NULL,
  `DELAY_TYPE_FLAG` varchar(50) NOT NULL DEFAULT '',
  `NOTIFICATION_STATUS` char(50) DEFAULT NULL,
  `NOTIFICATION_FAILURE_DETAIL` varchar(1000) DEFAULT NULL,
  `DELAY_TIME` smallint(5) DEFAULT NULL,
  `CREATION_TIMESTAMP` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ALERT_TRANSACTION_ID`),
  KEY `FK_USER_USER_ID` (`SUBSCRIPTION_ID`),
  CONSTRAINT `SUBSCRIPTION_ID_FK` FOREIGN KEY (`SUBSCRIPTION_ID`) REFERENCES `SUBSCRIPTION` (`SUBSCRIPTION_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=860 DEFAULT CHARSET=latin1 ROW_FORMAT=DYNAMIC;


SUBSCRIPTION
************

CREATE TABLE `SUBSCRIPTION` (
  `SUBSCRIPTION_ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `USER_ID` varchar(50) NOT NULL DEFAULT '',
  `STATUS_TYPE_ID` int(11) NOT NULL,
  `SOURCE_LOCATION` varchar(255) NOT NULL,
  `DESTINATION_LOCATION` varchar(255) NOT NULL,
  `FROM_TIME` time DEFAULT NULL,
  `TO_TIME` time DEFAULT NULL,
  `ADVANCE_NOTIFY_TIME_MIN` smallint(5) DEFAULT NULL,
  `CREATION_TIMESTAMP` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `UPDATED_TIMESTAMP` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`SUBSCRIPTION_ID`),
  UNIQUE KEY `UNIQUE_SUBSCRIPTION` (`USER_ID`,`SOURCE_LOCATION`,`DESTINATION_LOCATION`,`FROM_TIME`,`TO_TIME`,`ADVANCE_NOTIFY_TIME_MIN`),
  KEY `FK_SUBSCRIPTION_STATUS_TYPE` (`STATUS_TYPE_ID`),
  CONSTRAINT `FK_SUBSCRIPTION_STATUS_TYPE` FOREIGN KEY (`STATUS_TYPE_ID`) REFERENCES `STATUS_TYPE` (`STATUS_TYPE_ID`),
  CONSTRAINT `FK_USER_USER_ID` FOREIGN KEY (`USER_ID`) REFERENCES `USER` (`USER_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=88 DEFAULT CHARSET=latin1;


STATUS_TYPE
************

CREATE TABLE `STATUS_TYPE` (
  `STATUS_TYPE_ID` int(11) NOT NULL,
  `STATUS_TYPE_NAME` varchar(50) DEFAULT NULL,
  `STATUS_DESCRIPTION` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`STATUS_TYPE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


STATION_DETAILS
****************
CREATE TABLE `STATION_DETAILS` (
  `STATION_CODE` varchar(50) DEFAULT NULL,
  `STATION_NAME` varchar(50) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

